---
toc: content
group: 
  title: é¡¹ç›®ç»éªŒ
  order: 1
order: 3
---
# ç³»ç»Ÿç»„ä»¶åº“
## èƒŒæ™¯
ä¼ä¸šçº§åº”ç”¨çš„äº§å“ï¼Œä»é¡µé¢ä½¿ç”¨ä¸Šçœ‹ï¼Œä¼šæœ‰å¾ˆå¤šçš„ç›¸ä¼¼ï¼Œå¤§çš„æœ‰åˆ—è¡¨é¡µé¢çš„å¸ƒå±€ã€è¡¨å•é¡µé¢çš„å¸ƒå±€ä»¥åŠæ•°æ®å±•ç¤ºçš„æ¨¡å¼ç­‰ï¼Œå°çš„æœ‰æŒ‰é’®é£æ ¼ã€å¼¹çª—çš„é£æ ¼åŠæç¤ºçš„é£æ ¼ç­‰ã€‚è™½ç„¶ä¼šæœ‰åƒant-deisgnè¿™æ ·çš„ç»„ä»¶åº“ï¼Œä½†æ˜¯æ¯ä¸ªä¼ä¸šéƒ½ä¼šæœ‰è‡ªå·±çš„UIè§„èŒƒï¼Œç‰¹åˆ«æ˜¯è®¾è®¡ç³»ç»Ÿè¦æ±‚ä¸¥è‹›çš„ä¼ä¸šï¼Œè¿™æ—¶å°±éœ€è¦å¯¹ant-designè¿›è¡ŒäºŒæ¬¡å¼€å‘å’Œè®¾è®¡ï¼Œå¹¶å½¢æˆä¼ä¸šå†…éƒ¨çš„åŸºç¡€ç»„ä»¶åº“ã€‚

æ­¤å¤–ï¼Œä»ä¸šåŠ¡ä¸Šæ¥è¯´ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šç›¸åŒçš„åŠŸèƒ½å¯ä»¥æ²‰æ·€ï¼Œæ¯”å¦‚åŸå¸‚é€‰æ‹©ï¼Œç”¨æˆ·é€‰æ‹©ã€å•†å“é€‰æ‹©åŠè®¢å•é€‰æ‹©ç­‰ã€‚è™½ç„¶ä¹Ÿä¸šåŠ¡å¼ºè€¦åˆï¼Œä½†æ˜¯å®ƒä»¬åœ¨ä½¿ç”¨æ—¶ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„ã€‚

ä¸ºäº†å‡å°‘ä»£ç çš„æ•°æ®ï¼Œæé«˜å„å›¢é˜Ÿçš„å¼€å‘æ•ˆç‡ï¼Œè¿™äº›æ ‡å‡†åŒ–çš„ç»„ä»¶å°±éœ€è¦å•ç‹¬æŠ½ç¦»æˆç»„ä»¶åº“ã€‚è¿™å¯¹ä¸­å¤§å‹ç¨³å®šäº§å“æ¥è¯´å¾ˆé‡è¦ã€‚

å¦‚æœå†è¿›ä¸€æ­¥ï¼Œå¯ä»¥è€ƒè™‘åšæˆä½ä»£ç å¹³å°ï¼Œä¸è¿‡å¼€å‘æˆæœ¬è¿‡é«˜ã€‚

## æŠ€æœ¯æ–¹æ¡ˆ
### åŸºäºç»„ä»¶åº“äºŒæ¬¡å¼€å‘
å¯ä»¥åŸºäºç»„ä»¶åº“ï¼Œå¦‚ant-designå¼€å‘ï¼Œä½¿ç”¨rollupä¹‹ç±»çš„å·¥å…·æ‰“åŒ…ã€‚å¦‚æœUIè§„èŒƒè¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œåªè¦é’ˆå¯¹ç»„ä»¶åº“UIé£æ ¼çš„å°è°ƒæ•´å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€‚å¦‚æœç³»ç»Ÿæœ‰ä½¿ç”¨å¾®å‰ç«¯æ¶æ„ï¼Œè¿˜éœ€è¦ä¿æŒantdçš„ç‰ˆæœ¬ä¸€è‡´ï¼Œå¦åˆ™ä¼šäº§ç”Ÿå†²çªã€‚

### åŸºäºshadcn/uiå¼€å‘
ä¸åŒäºåŸºäºç»„ä»¶åº“çš„æ–¹æ¡ˆï¼Œshadcn/uiæ²¡æœ‰å—é™äºç»„ä»¶åº“çš„é—®é¢˜ã€‚å®ƒå¯ä»¥å®Œå…¨å®šåˆ¶ï¼Œå°†shadcn/uiçš„ç»„ä»¶åº“ä»£ç ä¼šæˆä¸ºè¯¥ç»„ä»¶åº“çš„åŸºç¡€ä»£ç ã€‚

### å¯¹æ¯”
| ç»´åº¦         | Ant Design è¦†ç›–æ–¹æ¡ˆ                       | shadcn/ui å†…ç½®æ–¹æ¡ˆ                     |
|--------------|-------------------------------------------|----------------------------------------|
| ä¾èµ–å…³ç³»     | å¼ºä¾èµ– antd ç‰ˆæœ¬ï¼Œéœ€å¤„ç† peerDependencies | é›¶è¿è¡Œæ—¶ä¾èµ–ï¼Œç»„ä»¶ä»£ç å®Œå…¨è‡ªåŒ…å«       |
| æ ·å¼ç³»ç»Ÿ     | éœ€è¦ç®¡ç†å…¨å±€æ ·å¼/LESS å˜é‡è¦†ç›–            | ä½¿ç”¨ Tailwind CSS åŸå­åŒ–æ ·å¼ï¼Œå¤©ç„¶éš”ç¦» |
| æ‰“åŒ…ä½“ç§¯     | éœ€é…åˆæŒ‰éœ€åŠ è½½å‡å°‘ä½“ç§¯                    | é€šè¿‡ Tree Shaking è‡ªåŠ¨ä¼˜åŒ–ï¼Œæ— å†—ä½™ä»£ç  |
| å®šåˆ¶çµæ´»æ€§   | å—é™äº AntD çš„ API è®¾è®¡                   | å¯è‡ªç”±ä¿®æ”¹ç»„ä»¶æºç ï¼Œç”šè‡³æ›¿æ¢åº•å±‚å®ç°   |
| å¾®å‰ç«¯å…¼å®¹æ€§ | å¤šç‰ˆæœ¬å…±å­˜å›°éš¾                            | å¤©ç„¶æ”¯æŒå¤šå®ä¾‹å…±å­˜                     |
| å‡çº§ç»´æŠ¤     | ç‰ˆæœ¬å‡çº§å¯èƒ½ç ´åç°æœ‰æ ·å¼                  | æ¯ä¸ªç»„ä»¶ç‹¬ç«‹æ¼”è¿›ï¼Œæ— å…¨å±€å½±å“           |

## è½åœ°æ–¹æ¡ˆ
- å…ˆå°è£…3-5ä¸ªæœ€é«˜é¢‘ç»„ä»¶ï¼Œå†é€æ­¥æ‰©å±•ï¼Œé¿å…ä¸€å¼€å§‹è¿½æ±‚å¤§è€Œå…¨ã€‚
- æœ‰å¯è§†åŒ–çš„æ–‡æ¡£ï¼Œç±»ä¼¼ant-designçš„æ–‡æ¡£ã€‚
- å¯ä»¥å°†ç»„ä»¶åˆ†ä¸ºä¸¤ç±»ï¼šåŸºç¡€UIå’Œä¸šåŠ¡ç»„ä»¶ã€‚
- æ ¹æ®é¡µé¢æˆ–æ¨¡å—ï¼Œé€æ­¥æ›¿æ¢ã€‚
- æ”¶é›†åé¦ˆï¼ŒæŒç»­ä¼˜åŒ–ã€‚

## ant-designå°è£…ç¤ºä¾‹
### æ•ˆæœ
- ç»„ä»¶åº“åŸºäºant-desgignå®ç°
- æ‹¥æœ‰ä¸€ä¸ªåŸºç¡€ç»„ä»¶ï¼šæŒ‰é’®
- æ‹¥æœ‰ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶ï¼šç”¨æˆ·é€‰æ‹©
- æ”¯æŒæŒ‰éœ€åŠ è½½
- æ”¯æŒTypescript

### é¡¹ç›®ç»“æ„
```bash
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/               # åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ button/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ style.less
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ index.ts        # ç»„ä»¶å¯¼å‡ºå…¥å£
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ biz/                # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ user-picker/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ rollup.config.js    # æ‰“åŒ…é…ç½®
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ demo/                   # å¼€å‘é¢„è§ˆ
â”œâ”€â”€ .babelrc
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```
### ç»„ä»¶ä»£ç 
1. åŸºç¡€æŒ‰é’®ç»„ä»¶ (packages/core/src/button/index.tsx)
```js
import React from 'react';
import { Button as AntdButton, ButtonProps } from 'antd';
import './style.less';

interface IButtonProps extends ButtonProps {
  /** ä¸šåŠ¡è‡ªå®šä¹‰ç±»å‹ */
  businessType?: 'primary' | 'warning';
}

const Button: React.FC<IButtonProps> = (props) => {
  const { businessType, className = '', ...rest } = props;
  
  return (
    <AntdButton
      {...rest}
      className={`business-btn ${businessType ? `business-btn-${businessType}` : ''} ${className}`}
    />
  );
};

export default Button;
```
2. ç”¨æˆ·é€‰æ‹©å™¨ (packages/biz/src/user-picker/index.tsx)
```js
import React, { useState } from 'react';
import { Select, Spin } from 'antd';
import { debounce } from 'lodash-es';
import type { UserPickerProps, UserInfo } from './interface';

const UserPicker: React.FC<UserPickerProps> = ({ api, mode = 'multiple' }) => {
  const [options, setOptions] = useState<UserInfo[]>([]);
  const [fetching, setFetching] = useState(false);

  const fetchUsers = debounce(async (keyword: string) => {
    setFetching(true);
    try {
      const data = await api(keyword);
      setOptions(data.map(item => ({
        label: `${item.name}(${item.dept})`,
        value: item.id
      })));
    } finally {
      setFetching(false);
    }
  }, 500);

  return (
    <Select
      mode={mode}
      showSearch
      filterOption={false}
      onSearch={fetchUsers}
      notFoundContent={fetching ? <Spin size="small" /> : null}
      options={options}
    />
  );
};

export default UserPicker;
```

### æ„å»ºé…ç½®
1. Rollup æ‰“åŒ…é…ç½® (config/rollup.config.js)
```js
import { nodeResolve } from '@rollup/plugin-node-resolve';
import commonjs from '@rollup/plugin-commonjs';
import typescript from '@rollup/plugin-typescript';
import postcss from 'rollup-plugin-postcss';
import { terser } from 'rollup-plugin-terser';

const isProd = process.env.NODE_ENV === 'production';

export default {
  input: 'packages/core/src/index.ts',
  output: [
    {
      dir: 'dist/esm',
      format: 'es',
      preserveModules: true,
      sourcemap: true,
    },
    {
      dir: 'dist/cjs',
      format: 'cjs',
      preserveModules: true,
      sourcemap: true,
    }
  ],
  plugins: [
    nodeResolve(),
    commonjs({
      include: /node_modules/,
    }),
    typescript({
      tsconfig: './config/tsconfig.json',
    }),
    postcss({
      extract: true,
      minimize: isProd,
    }),
    isProd && terser(),
  ],
  external: ['react', 'antd', 'lodash-es']
};
```
2. TS ç±»å‹å¯¼å‡º (packages/biz/src/user-picker/interface.ts)
```js
export interface UserInfo {
  id: string;
  name: string;
  dept: string;
  avatar?: string;
}

export interface UserPickerProps {
  /** ç”¨æˆ·æœç´¢API */
  api: (keyword: string) => Promise<UserInfo[]>;
  /** é€‰æ‹©æ¨¡å¼ */
  mode?: 'multiple' | 'single';
  /** æ ·å¼ç±»å */
  className?: string;
}
```

### æŒ‰éœ€åŠ è½½æ–¹æ¡ˆ
1. Babel é…ç½® (.babelrc)
```json
{
  "presets": [
    "@babel/preset-env",
    "@babel/preset-react",
    "@babel/preset-typescript"
  ],
  "plugins": [
    ["import", {
      "libraryName": "your-component-lib",
      "libraryDirectory": "dist/esm",
      "camel2DashComponentName": false
    }]
  ]
}
```
2. ç»„ä»¶åº“ä½¿ç”¨ç¤ºä¾‹
```js
// æŒ‰éœ€å¼•å…¥
import { Button } from 'your-component-lib/core';
import { UserPicker } from 'your-component-lib/biz';

// ä¸šåŠ¡APIå¯¹æ¥
const fetchUsers = async (keyword: string) => {
  return request('/api/users', { params: { keyword } });
};

function Demo() {
  return (
    <>
      <Button businessType="warning">é£é™©æ“ä½œ</Button>
      <UserPicker api={fetchUsers} />
    </>
  );
}
```

## shadcn/uiå°è£…ç¤ºä¾‹
### æ•ˆæœ
- ç»„ä»¶åº“åŸºäºshadcn/ui + tailwindcsså®ç°
- æ‹¥æœ‰ä¸€ä¸ªåŸºç¡€ç»„ä»¶ï¼šæŒ‰é’®
- æ‹¥æœ‰ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶ï¼šç”¨æˆ·é€‰æ‹©
- æ”¯æŒæŒ‰éœ€åŠ è½½
- æ”¯æŒTypescript

### é¡¹ç›®ç»“æ„
```bash
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/               # åŸºç¡€ç»„ä»¶ (shadcnç”Ÿæˆ)
â”‚   â”‚   â”‚   â””â”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ biz/              # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ user-picker.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ utils.ts          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ constants.ts      # å¸¸é‡
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ global.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ vite.config.ts            # æ‰“åŒ…é…ç½®
â”œâ”€â”€ tailwind.config.js        # è®¾è®¡ç³»ç»Ÿé…ç½®
â””â”€â”€ package.json
```
### ç»„ä»¶ä»£ç 
1. åŸºç¡€æŒ‰é’®ç»„ä»¶ (src/components/ui/button.tsx)
ç›´æ¥åœ¨shadcn/uiçš„buttonç»„ä»¶ä¸­ä¿®æ”¹ï¼Œå½“ç„¶åˆ†ç¦»ä¹Ÿå¯ä»¥
```js
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

// 1. å®šä¹‰ä¼ä¸šå®šåˆ¶åŒ–å˜ä½“
const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
        // ä¼ä¸šæ–°å¢ç±»å‹
        premium: "bg-gradient-to-r from-indigo-500 to-purple-600 text-white"
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

// 2. æš´éœ²ç±»å‹æ¥å£
export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  isLoading?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, isLoading, children, ...props }, ref) => {
    return (
      <button
        className={buttonVariants({ variant, size, className })}
        ref={ref}
        disabled={isLoading}
        {...props}
      >
        {isLoading ? (
          <span className="mr-2 animate-spin">ğŸŒ€</span> // æ›¿æ¢ä¸ºä¼ä¸š loading ç»„ä»¶
        ) : null}
        {children}
      </button>
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }
```
2. ä¸šåŠ¡ç”¨æˆ·é€‰æ‹©å™¨ (src/components/biz/user-picker.tsx)
```js
import * as React from "react"
import { Button } from "../ui/button"
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
} from "../ui/command"
import { Popover, PopoverContent, PopoverTrigger } from "../ui/popover"
import { Check, ChevronsUpDown } from "lucide-react"
import { cn } from "@/lib/utils"

// ç±»å‹å®šä¹‰
export interface User {
  id: string
  name: string
  department: string
}

interface UserPickerProps {
  users: User[]
  selectedUsers: User[]
  onSelect: (user: User) => void
  className?: string
}

export function UserPicker({
  users,
  selectedUsers,
  onSelect,
  className,
}: UserPickerProps) {
  const [open, setOpen] = React.useState(false)
  const [searchTerm, setSearchTerm] = React.useState("")

  // è¿‡æ»¤é€»è¾‘
  const filteredUsers = React.useMemo(() => {
    return users.filter(user =>
      user.name.toLowerCase().includes(searchTerm.toLowerCase())
  }, [users, searchTerm])

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger asChild>
        <Button
          variant="outline"
          role="combobox"
          aria-expanded={open}
          className={cn("w-[300px] justify-between", className)}
        >
          {selectedUsers.length > 0
            ? `${selectedUsers.length} users selected`
            : "Select users..."}
          <ChevronsUpDown className="ml-2 h-4 w-4 shrink-0 opacity-50" />
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-[300px] p-0">
        <Command shouldFilter={false}>
          <CommandInput
            placeholder="Search users..."
            value={searchTerm}
            onValueChange={setSearchTerm}
          />
          <CommandEmpty>No users found.</CommandEmpty>
          <CommandGroup className="max-h-64 overflow-y-auto">
            {filteredUsers.map((user) => (
              <CommandItem
                key={user.id}
                value={user.id}
                onSelect={() => {
                  onSelect(user)
                  setSearchTerm("")
                }}
              >
                <Check
                  className={cn(
                    "mr-2 h-4 w-4",
                    selectedUsers.some(u => u.id === user.id)
                      ? "opacity-100"
                      : "opacity-0"
                  )}
                />
                {user.name} ({user.department})
              </CommandItem>
            ))}
          </CommandGroup>
        </Command>
      </PopoverContent>
    </Popover>
  )
}
```

### æ„å»ºé…ç½®
è¿™é‡Œä½¿ç”¨Viteæ„å»º
```js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import dts from 'vite-plugin-dts'
import path from 'path'

export default defineConfig({
  plugins: [
    react(),
    dts({
      insertTypesEntry: true, // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶
    }),
  ],
  build: {
    lib: {
      entry: path.resolve(__dirname, 'src/index.ts'),
      name: 'EnterpriseUI',
      formats: ['es', 'cjs'],
      fileName: (format) => `index.${format}.js`
    },
    rollupOptions: {
      external: ['react', 'react-dom', 'tailwind-merge', 'class-variance-authority'],
      output: {
        globals: {
          react: 'React',
          'react-dom': 'ReactDOM'
        }
      }
    }
  }
})
```

2. Tailwind é…ç½® (tailwind.config.js)
```js
module.exports = {
  content: [
    "./src/**/*.{ts,tsx}",
    // å‘å¸ƒåä½¿ç”¨æ–¹çš„å¼•ç”¨è·¯å¾„
    "../../node_modules/enterprise-ui/**/*.js" 
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          DEFAULT: "#3b82f6", // ä¼ä¸šä¸»è‰²
          foreground: "#ffffff"
        },
        destructive: {
          DEFAULT: "#ef4444",
          foreground: "#ffffff"
        }
      }
    }
  },
  plugins: [],
}
```

3. å…¥å£æ–‡ä»¶ (src/index.ts)
```js
// åŸºç¡€ç»„ä»¶
export { Button } from "./components/ui/button"
export { buttonVariants } from "./components/ui/button"

// ä¸šåŠ¡ç»„ä»¶
export { UserPicker } from "./components/biz/user-picker"

// å·¥å…·å‡½æ•°
export { cn } from "./lib/utils"
```

### æŒ‰éœ€åŠ è½½æ–¹æ¡ˆ
1. å‘å¸ƒä¸º ES Module + CommonJS åŒæ ¼å¼
```json
// package.json
{
  "name": "enterprise-ui",
  "version": "0.1.0",
  "main": "./dist/index.cjs.js",
  "module": "./dist/index.es.js",
  "types": "./dist/index.d.ts",
  "sideEffects": false,
  "files": ["dist", "src"],
  "peerDependencies": {
    "react": ">=18",
    "tailwindcss": "^3.0.0"
  }
}
```

2. æŒ‰éœ€å¼•å…¥
```js
// ä¸šåŠ¡é¡¹ç›®ä¸­ä½¿ç”¨
import { Button } from "enterprise-ui" // è‡ªåŠ¨ Tree Shaking
import { UserPicker } from "enterprise-ui/components/biz/user-picker"
```

### å¼€å‘ä¸æ„å»ºå‘½ä»¤
```json
// package.json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "prepublishOnly": "npm run build",
    "storybook": "storybook dev -p 6006" // å¯é€‰ï¼šç»„ä»¶æ–‡æ¡£
  }
}
```
